<ion-header>
    <ion-navbar>
        <ion-title>{{ 'PAGE_USER-PROFILE.YOUR_ACCOUNT' | translate }}</ion-title>
        <ion-buttons class="btn_header" margin-right end>
            <a (click)="openCreateUserProfilePage()">
                <img src="assets/img/edit.svg">
            </a>
        </ion-buttons>
        <ion-buttons class="btn_header" margin-right end>
            <a (click)="openSettings()">
                <img src="assets/img/settings.svg">
            </a>
        </ion-buttons>
    </ion-navbar>
    <div class="header-shadow"></div>
</ion-header>

<ion-content class="padding-no">
    <ion-item class="border-bottom-no top-block-nau padding-top-5vw padding-left-5vw padding-right-5vw">
        <div item-start class="width-100 left-name">
            <span class="bold font-16 text-overflow-2 margin-right-1vw">{{ user?.name }}</span>
        </div>
        <div item-start class="right-labels">
            <!--
                <span class="label label-ios points font-75">
                    {{ 'PAGE_CREATE-USER-PROFILE.YOU_HAVE' | translate }}
                    {{ user.points }}
                    {{ user.points >= 10 && user.points <= 20
                    ? ('UNIT.POINTS' | translate)
                    : user.points % 10 == 1
                    ? ('UNIT.POINT' | translate)
                    : (user.points % 10 >= 2 && user.points % 10 <= 4)
                    ? ('UNIT.POINTS2' | translate)
                    : ('UNIT.POINTS' | translate) }}
                </span>
-->
            <span class="label label-ios points_friens font-75">
                <span [innerHTML]="'PAGE_CREATE-USER-PROFILE.POINTS_FRIENDS' | translate"></span>
                <span>{{ user.referral_points }}</span>
            </span>

            <span class="label label-ios points_redemptions font-75">
                <span [innerHTML]="'PAGE_CREATE-USER-PROFILE.POINTS_REDEMPTIONS' | translate"></span>
                <span>{{ user.redemption_points }}</span>
            </span>
        </div>
        <!--
        <ion-avatar item-start>
            <div text-center class="user_level font-22 text-white table">
                <span class="table-cell">L{{ user.level }}</span>
            </div>
        </ion-avatar>
        <div class="font-18 text-3E4B5D bold wrap-no">{{ user?.name }}</div>
        <div class="font-14 text-828282">{{ user.points }}</div>
    <a (click)="openRewards()" item-end>
      <a><img src="assets/img/user_profile/btn_icon1.svg"></a>
    </a>
    <a (click)="openAchieve()" item-end>
      <a class="margin-left-6vw"><img src="assets/img/user_profile/btn_icon2.svg"></a>
    </a>
    -->
    </ion-item>
<div class="main-position-center">
    <div class="position-center width-100">
        <!--
    <div class="block-user-level">
        <div class="block-circle user-level-1">
            <ion-item no-lines class="user-ava-name overflow-visible">
                <div [style.background-image]="'url(' + user.picture_url + '?size=mobile&)'" item-start class="circle-ava"></div>
                <div class="text-3E4B5D wrap-no bold lbl1">{{ user?.name }}</div>
                <div class="text-3E4B5D lbl2">{{ user.points }}</div>
            </ion-item>
            <div class="circle-center">
                 <div class="block-get">
                    <img src="assets/img/user_profile/cards.svg">
                    <div text-uppercase class="bold">
                        {{ 'PAGE_USER-PROFILE.GET' | translate }}
                    </div>
                    <span text-uppercase class="bold">
                        {{ 'PAGE_USER-PROFILE.ADDITIONAL' | translate }}
                        <br>{{ 'PAGE_USER-PROFILE.POINTS' | translate }}
                    </span>
                </div>
            </div>

            <div class="box box4 color-no-fill">
            </div>

            <div class="box box1">
                <div class="label-point circle-label-top">100</div>
                <div class="next-level">
                    <ion-icon name="checkmark"></ion-icon>
                    <span text-uppercase>{{ 'PAGE_USER-PROFILE.NEXT' | translate }}<br>{{ 'PAGE_USER-PROFILE.LVL' | translate }} {{ user.level }}
                    </span>
                </div>
            </div>

            <div class="box box3">
                <div class="label-point circle-label-left">75</div>
            </div>

            <div class="box box2">
                <div class="label-point circle-label-right">25</div>
                <div class="label-point circle-label-bottom">50</div>
            </div>
        </div>
    </div>
-->
    <!-- <div class="font-14 text-4F4F4F" margin-bottom text-uppercase text-center>
        {{ 'PAGE_USER-PROFILE.YOUR_TASKS_JOBS_FOR_TODAY' | translate }}
    </div> -->

    <!-- <ion-grid text-center class="block-slider">
        <ion-row>
            <ion-col col-1 align-self-center>
                <a>
                    <ion-icon (click)="slidePrev()" name="ios-arrow-back" class="font-200 text-828282"></ion-icon>
                </a>
            </ion-col>
            <ion-col class="grid" col-10 align-self-center>
                <ion-slides spaceBetween="10"> -->
                    <!-- <ion-slide (click)="openRewards()"> temporary-->
                    <!-- <ion-slide>
                        <ion-list no-lines>
                            <ion-item class="text-white">
                                <ion-avatar item-start>
                                    <img src="assets/img/user_profile/slide1.svg">
                                </ion-avatar>
                                <div class="bold font-22 text-white">{{ 'PAGE_USER-PROFILE.GET_NEW_POINTS' | translate }}</div>
                                <div text-wrap class="font-12 text-white margin-top-3vw text-overflow-3-font-12">
                                    {{ 'PAGE_USER-PROFILE.GET_NEW_OFFERS_NEARBY' | translate }}
                                </div>
                            </ion-item>
                        </ion-list>
                    </ion-slide>
                </ion-slides>
            </ion-col>
            <ion-col col-1 align-self-center>
                <a>
                    <ion-icon (click)="slideNext()" name="ios-arrow-forward" class="font-200 text-828282"></ion-icon>
                </a>
            </ion-col>
        </ion-row>
    </ion-grid> -->

    <ion-grid text-center class="block-slider">
        <ion-row>
            <ion-col col-1 align-self-center>
                <a>
                    <ion-icon (click)="slidePrev()" name="ios-arrow-back" class="font-200 text-828282"></ion-icon>
                </a>
            </ion-col>
            <ion-col class="grid" col-10 align-self-center>
                <ion-slides spaceBetween="10">
                    <!-- <ion-slide (click)="openRewards()"> temporary-->
                    <ion-slide *ngFor="let offer of offers">
                        <!-- <ion-list no-lines>
                            <ion-item class="text-white"> -->
                        <ion-list
                            padding-left
                            padding-right
                            no-lines class="item-block-nau margin-top-10 block-featured">
                                <div tappable ion-item detail-none>
                                    <ion-avatar
                                        (click)="openPlace($event, offer?.account.owner.place, false)"
                                        item-start
                                        text-center
                                        class="relative">
                                        <div
                                            [ngStyle]="{ 'background-image': 'url(' + offer?.account.owner.place.picture_url + '?size=mobile&)' }"
                                            class="thumb_image margin-top-2vw">
                                        </div>
                                        <div class="info-block" text-left>
                                            <div>
                                                <ng-container *ngFor="let showStar of getStars(offer?.account.owner.place.stars)">
                                                    <ion-icon class="text-FEC282 icon-star" name="{{ showStar ? 'star' : 'star-outline' }}"></ion-icon>
                                                </ng-container>
                                            </div>
                                            <div class="margin-top-1vw">
                                                <img class="icon_arrow" src="assets/img/user_home/icon_small_arrow.svg">
                                                <span class="font-75 text-828282">
                                                    {{ getDistance(offer.latitude, offer.longitude).distance }}
                                                    {{ getDistance(offer.latitude, offer.longitude).key | translate}}
                                                </span>
                                            </div>
                                            <div class="margin-top-1vw">
                                                <img src="assets/img/user_home/icon_small_user.svg">
                                                <span class="font-75 text-828282">
                                                    {{ offer?.account.owner.place.redemptions_count !== undefined
                                                        ? offer?.account.owner.place.redemptions_count
                                                        : offer?.account.owner.place.testimonials_count}}
                                                </span>
                                            </div>
                                        </div>
                                    </ion-avatar>
                                    <div
                                        (click)="openPlace($event, offer?.account.owner.place, false, offer)"
                                        class="right-block">
                                        <div
                                            [ngStyle]="{ 'background-image': 'url(' + offer.picture_url + '?size=mobile&)' }"
                                            [ngClass]="{ 'grayscale' : (offer.redemption_access_code && offer.redemption_access_code > 0) }"
                                            class="font-0 right-side relative">
                                            <div class="right-side-content">
                                                <div class="smooth_transition">
                                                    <div class="scroll_content margin-top-2vw">
                                                        <div class="bold font-18 text-white">{{ offer.label }}</div>
                                                    </div>
                                                </div>
                                                <div
                                                    [ngStyle]="{ 'pointer-events': offer.redemption_access_code ? 'none' : 'auto' }"
                                                    [innerHTML]="offer.rich_description"
                                                    class="text-white font-12 wrap text-overflow-5 margin-top-2vw">
                                                </div>
                                            </div>
                                            <div [ngClass]="offer.type" class="right-top-angle"></div>
                                        </div>
                                        <img
                                            *ngIf="offer.is_favorite"
                                            [ngClass]="{ 'grayscale' : (offer.redemption_access_code && offer.redemption_access_code > 0) }"
                                            class="star_right"
                                            src="assets/img/place/icon_star.svg">
                                        <div class="block-fr bold">
                                            <div *ngIf="offer.max_count" class="coupon font-10 flex">
                                                {{ 'PAGE_PLACES.COUPONS_LEFT' | translate }}: {{ offer.max_count - offer.redemptions_count }}
                                                /{{ offer.max_count }}
                                            </div>
                                            <div
                                                *ngIf="((offer.redemption_access_code && offer.redemption_access_code > 0) && (offer.referral_points_price || offer.redemption_points_price))"
                                                class="block-right font-14 flex"
                                                text-right>
                                                <span class="flex" *ngIf="offer.referral_points_price > user.referral_points">
                                                    <span class="circle f">{{ 'PAGE_PLACES.FRIENDS' | translate }}</span>
                                                    {{ offer.referral_points_price }}
                                                </span>
                                                <span class="flex" *ngIf="offer.redemption_points_price > user.redemption_points">
                                                    <span class="circle r">{{ 'PAGE_PLACES.OFFER' | translate }}</span>
                                                    {{ offer.redemption_points_price }}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ion-list>




                            <!-- </ion-item>
                        </ion-list> -->
                    </ion-slide>
                </ion-slides>
            </ion-col>
            <ion-col col-1 align-self-center>
                <a>
                    <ion-icon (click)="slideNext()" name="ios-arrow-forward" class="font-200 text-828282"></ion-icon>
                </a>
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-grid text-center class="block-icon-bottom">
    <!-- <ion-grid text-center padding-top padding-bottom class="block-icon-bottom"> -->
        <ion-row>
            <a ion-col class="text-gray" (click)="openUserOffers()" align-self-start>
                <div class="relative">
                    <div class="btn_icon btn_icon_offers" margin-bottom></div>
                    <div class="btn_icon_offers"></div>
                    <div class="bold font-22 text-3E4B5D margin-bottom-1vw">{{ user.offers_count }}</div>
                    <div text-uppercase class="text-3E4B5D font-12">
                        {{ user.offers_count >= 10 && user.offers_count <= 20
                        ? ('UNIT.OFFERS' | translate)
                        : user.offers_count % 10 == 1
                        ? ('UNIT.OFFER' | translate)
                        : (user.offers_count % 10 >= 2 && user.offers_count % 10 <= 4)
                        ? ('UNIT.OFFERS2' | translate)
                        : ('UNIT.OFFERS' | translate) }}
                    </div>
                </div>
            </a>
            <a ion-col class="text-gray" (click)="openUserNau()" align-self-end>
                <div class="relative">
                    <div class="btn_icon btn_icon_nau" margin-bottom></div>
                    <div class="bold font-22 text-3E4B5D margin-bottom-1vw">{{ balance }}</div>
                    <div text-uppercase class="text-3E4B5D font-12">{{ 'PAGE_USER-PROFILE.NAU' | translate }}</div>
                </div>
            </a>
            <a ion-col class="text-gray" (click)="openUserUsers()" align-self-start>
                <div class="relative">
                    <div class="btn_icon btn_icon_users" margin-bottom></div>
                    <div class="bold font-22 text-3E4B5D margin-bottom-1vw">{{ user.referrals_count }}</div>
                    <div text-uppercase class="text-3E4B5D font-12">
                        {{ user.referrals_count >= 10 && user.referrals_count <= 20
                        ? ('UNIT.FRIENDS' | translate)
                        : user.referrals_count % 10 == 1
                        ? ('UNIT.FRIEND' | translate)
                        : (user.referrals_count % 10 >= 2 && user.referrals_count % 10 <= 4)
                        ? ('UNIT.FRIENDS2' | translate)
                        : ('UNIT.FRIENDS' | translate) }}
                    </div>
                </div>
            </a>
        </ion-row>
    </ion-grid>
    </div>
</div>
    <div margin-left margin-right margin-bottom>
        <button margin-bottom (click)="shareInvite()" color="primary" ion-button block>
            {{ 'PAGE_INVITE.INVITE_FRIENDS' | translate }}
        </button>
        <button (click)="logout()" color="primary" ion-button block text-uppercase>
            {{ 'PAGE_USER-PROFILE.LOGOUT' | translate }}
        </button>
    </div>
</ion-content>
