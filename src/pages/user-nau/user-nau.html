<ion-header>
    <ion-navbar>
        <ion-title>{{ 'PAGE_USER-NAU.NAU_TRANSACTIONS' | translate }}</ion-title>
    </ion-navbar>
    <div class="header-shadow"></div>
</ion-header>

<ion-content padding>

    <ion-item class="border-bottom-no top-block-nau">
        <ion-avatar item-start>
            <img src="assets/img/user_nau/icon_nau.svg">
        </ion-avatar>
        <div item-content>
            <div class="font-18 text-3E4B5D bold">{{ balance }}</div>
            <div class="font-14 text-828282">NAU</div>
        </div>
        <button (click)="openTransfer()" 
                item-end 
                ion-button 
                class="btn_transfer font-14 text-white">
                {{ 'PAGE_USER-NAU.TRANSFER' | translate }}
        </button>
        <a item-end margin-left class="btn_calendar_user">
            <a (click)="showCalendar()">
                <img src="assets/img/user_offers/icon_right.svg">
                <ion-datetime doneText="Ok" 
                            [(ngModel)]="date" 
                            (ngModelChange)="filterByDate()" 
                            displayFormat="DDD DD/MM/YYYY" 
                            pickerFormat="MMM/DD/YYYY"
                            min="2017-10-01" 
                            max="2021-12-31">
                </ion-datetime>
            </a>
        </a>
    </ion-item>

    <div margin-top class="font-14 text-4F4F4F" text-uppercase>{{ 'PAGE_USER-NAU.LATEST_PAYMENTS' | translate }}</div>
    <ion-list no-lines class="item-block-nau margin-top-5">
        <ion-item class="relative" *ngFor="let transaction of transactions">
            <div [ngClass]="{ 'text-FF8B10' : (transactionSource( transaction.source_account_id, transaction.amount) < 0), 'text-3E4B5D' : (transactionSource( transaction.source_account_id, transaction.amount) > 0)}"
                class="font-22 margin-bottom-5 bold overflow">
                <span class="bold">{{ 'PAGE_USER-NAU.PAY' | translate }} {{ transaction.id }}</span>
            </div>
            <div [ngClass]="{ 'text-FF8B10' : (transactionSource( transaction.source_account_id, transaction.amount) < 0), 'text-3E4B5D' : (transactionSource( transaction.source_account_id, transaction.amount) > 0)}"
                class="font-22 star_right" text-uppercase>
                <span class="bold">{{ transactionSource( transaction.source_account_id, transaction.amount) }}</span>
                <span class="regular" text-uppercase> {{ 'PAGE_USER-NAU.NAU' | translate }}</span>
            </div>
            <div class="font-14 text-828282">{{ transaction.created_at | date: 'dd/MM/y H:mm:ss' }}</div>
        </ion-item>
    </ion-list>
    <ion-infinite-scroll *ngIf="page <= lastPage" (ionInfinite)="doInfinite($event)" >
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="{{ 'PAGE_USER-NAU.LOADING_TRANSACTIONS' | translate }}"></ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>
